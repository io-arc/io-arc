#!/usr/bin/env node
/*!
io-arc
WEB/PWA/SPA boilerplate CLI

https://github.com/io-arc/io-arc/
Version: 0.1.1
License: ISC
Copyright (c) 2020 arc one
*/
"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("commander"),s=require("kleur"),n=e(require("fs")),r=e(require("make-dir")),i=e(require("path")),a=e(require("cpx")),o=e(require("inquirer")),c=require("child_process");const p="^7.0.2",l="^4.1.5",u="^4.43.0",h="^3.3.11";var d,m,w=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class g{constructor(){d.set(this,[10,17,0]),m.set(this,[0,0,0]);const e=process.versions.node.split(".");for(let t=0;t<0;t++)w(this,m)[t]=parseFloat(e[t])||0}check(){return w(this,d).every((e,t)=>e>=w(this,m)[t])}fail(){console.log(s.red("Please Node.js version update.")),console.log(s.blue(`Require: >= ${w(this,d).join(".")}\nYour version: ${process.versions.node}`)),console.log(s.green("Bye !")),process.exit(1)}}d=new WeakMap,m=new WeakMap;const f=(e,t)=>{console.log(s.red(`Oops X(\nFile create failed for ${e}`)),t&&console.error(t)},y=e=>{/{(.*)}/.test(e)?(e=>{const t=e.indexOf("{"),n=e.indexOf("}"),r=e.substr(0,t),i=e.substr(n+1);e.substr(t+1,n-2).split(",").forEach(e=>{console.log(s.white("File create completed for ")+s.green(r+e+i))})})(e):/\*\*$/.test(e)?(e=>{const t=e.replace("/**","");console.log(s.white("File create completed for ")+s.green(t))})(e):console.log(s.white("File create completed for ")+s.green(e))},v=require("json2yaml");class b{async create(e,t){const s=`config/${e}.yml`,a=v.stringify(t).replace(/^---(\n|\r|\n\r)/g,"").replace(/^\s{2}/gm,"");await r(i.dirname(s));try{n.writeFileSync(s,a),y(s)}catch(e){f(s,e)}}}var k,j=function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},E=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class M extends b{constructor(e,t,s,n,r){super(),k.set(this,void 0),j(this,k,{title:e,url:t,author:s,description:n,siteRoot:r})}async create(){await super.create("default",E(this,k)),await super.create("development",{type:"development"}),await super.create("production",{type:"production"})}}k=new WeakMap;var D,T,S=function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},$=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};const W=`${i.dirname(__filename)}/template`;class x{constructor(){D.set(this,void 0),T.set(this,async e=>{await Promise.all(e.map(async e=>{await r(`src/${e}`)}))}),S(this,D,[{source:`${W}/.{editorconfig,gitignore,npmrc,prettierrc,browserslistrc}`,output:""}])}add(e){if(0===e.length)return;const t=[];S(this,D,[...$(this,D),...e].filter(e=>{if(0===t.length)return t.push(e),e;return!!t.every(t=>t.source!==e.source||t.output!=t.output)&&(t.push(e),e)}))}async create(e){await $(this,T).call(this,e),$(this,D).forEach(e=>{a.copySync(e.source,e.output);const t=e.logValue||e.source.split("/").pop(),s=/(.+)/.test(e.output)?/\/$/.test(e.output)?e.output+t:`${e.output}/${t}`:t;y(s)})}}D=new WeakMap,T=new WeakMap;class L{startLog(e){console.log(s.bold().green(`# ${e}`))}fail(){console.log(s.red("Oops X(")),process.exit(1)}}var q,O,N,R,V,I,P=function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},_=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};const F="html",A="pug",B="html",H="php";class C extends L{constructor(){super(...arguments),q.set(this,F),O.set(this,B),N.set(this,!1),R.set(this,async e=>{if("html"===e)return;const t=await o.prompt({type:"list",name:"ext",message:"Build file extension",choices:[{name:".html",value:B},{name:".php",value:H}]}).catch(e=>(console.error(e),1));"number"!=typeof t?P(this,O,t.ext):this.fail()}),V.set(this,e=>{const t=[{source:`${W}/html/README.md`,output:`src/${e}`}];return _(this,N)&&t.push({source:`${W}/html/index.html`,output:`src/${e}`}),t}),I.set(this,e=>{const t=[{source:`${W}/pug/README.md`,output:`src/${e}`}];return _(this,N)&&t.push({source:`${W}/pug/assets/**`,output:`src/${e}/assets`,logValue:"assets"},{source:`${W}/pug/index.pug`,output:`src/${e}`}),t})}engine(){return _(this,q)}ext(){return _(this,O)}async questions(){this.startLog("Select HTML template engine");const e=await o.prompt({type:"list",name:"engine",message:"Template engine",choices:[{name:"None (Vanilla HTML)",value:F},{name:"Pug",value:A}]}).catch(e=>(console.error(e),1));"number"!=typeof e?(P(this,q,e.engine),await _(this,R).call(this,e.engine)):this.fail()}taskLibrary(){switch(_(this,q)){case F:return"@io-arc/task-webpack-html";case A:return"@io-arc/task-webpack-pug";default:return null}}async createTemplateQuestion(){const e=(()=>{switch(_(this,q)){case F:return"HTML";case A:return"Pug";default:return""}})();if(""===e)return;const t=await o.prompt({type:"confirm",name:"template",message:`${e} template create?`,default:!1}).catch(e=>(console.error(e),1));"number"!=typeof t?P(this,N,t.template):this.fail()}template(e){switch(_(this,q)){case F:return _(this,V).call(this,e);case A:return _(this,I).call(this,e);default:return[]}}}q=new WeakMap,O=new WeakMap,N=new WeakMap,R=new WeakMap,V=new WeakMap,I=new WeakMap;const J={"@babel/core":"^7.9.6","@babel/plugin-proposal-class-properties":"^7.8.3","@babel/plugin-proposal-private-methods":"^7.8.3","@babel/plugin-syntax-dynamic-import":"^7.8.3","@babel/plugin-transform-template-literals":"^7.8.3","@babel/preset-env":"^7.9.6",eslint:"^6.8.0","eslint-config-prettier":"^6.11.0","eslint-config-standard":"^14.1.1","eslint-plugin-babel":"^5.3.0","eslint-plugin-import":"^2.20.2","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1","eslint-plugin-vue":"^6.2.2","node-sass":"^4.14.0",prettier:"^2.0.5",pug:"^2.0.4",stylus:"^0.54.7",vue:"^2.6.11",webpack:"^4.43.0","webpack-cli":"^3.3.11"},U={"@types/config":"^0.0.36","@types/node":"^13.13.4","@typescript-eslint/eslint-plugin":"^2.30.0","@typescript-eslint/parser":"^2.30.0",eslint:"^6.8.0","eslint-config-prettier":"^6.11.0","eslint-loader":"^4.0.2","eslint-plugin-prettier":"^3.1.3",prettier:"^2.0.5",pug:"^2.0.4",stylus:"^0.54.7",vue:"^2.6.11",webpack:"^4.43.0","webpack-cli":"^3.3.11"},X={"@types/config":"^0.0.36","@types/node":"^13.13.4","@typescript-eslint/eslint-plugin":"^2.30.0","@typescript-eslint/parser":"^2.30.0",eslint:"^6.8.0","eslint-config-prettier":"^6.11.0","eslint-loader":"^4.0.2","eslint-plugin-prettier":"^3.1.3",prettier:"^2.0.5","ts-node":"^8.9.1",webpack:"^4.43.0","webpack-cli":"^3.3.11"},Q={"@babel/core":"^7.9.6","@babel/plugin-proposal-class-properties":"^7.8.3","@babel/plugin-proposal-private-methods":"^7.8.3","@babel/plugin-syntax-dynamic-import":"^7.8.3","@babel/plugin-transform-template-literals":"^7.8.3","@babel/preset-env":"^7.9.6","babel-eslint":"^10.1.0",eslint:"^6.8.0","eslint-config-prettier":"^6.11.0","eslint-config-standard":"^14.1.1","eslint-plugin-babel":"^5.3.0","eslint-plugin-import":"^2.20.2","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1",prettier:"^2.0.5",webpack:"^4.43.0","webpack-cli":"^3.3.11"},Y={node:">= 10.17.0",npm:">= 5.8.0",yarn:">= 1.7.0"},G="6.8.0",z="6.10.0",K="^2.0.5",Z="8.8.2",ee="3.8.3";var te,se,ne,re,ie=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},ae=function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s};const oe="typescript",ce="babel",pe="none",le="vue";class ue extends L{constructor(){super(...arguments),te.set(this,oe),se.set(this,pe),ne.set(this,e=>{const t=[],s=ie(this,se)===le?"vue":"babel";return t.push({source:`${W}/lint/js/${s}/.eslintrc.yml`,output:""},{source:`${W}/.babelrc`,output:""},{source:`${W}/js/README.md`,output:`src/${e}`}),t}),re.set(this,e=>{const t=[],s=ie(this,se)===le?"vue-ts":"ts";return t.push({source:`${W}/lint/js/${s}/.eslintrc.yml`,output:""},{source:`${W}/tsconfig.json`,output:""},{source:`${W}/ts/README.md`,output:`src/${e}`}),t})}preprocessor(){return ie(this,te)}framework(){return ie(this,se)}async questions(){this.startLog("Select JavaScript preprocessor");const e=await o.prompt([{type:"list",name:"preprocessor",message:"JavaScript preprocessor",choices:[{name:"TypeScript",value:oe},{name:"Babel",value:ce}]},{type:"list",name:"framework",message:"Use framework",choices:[{name:"None",value:pe},{name:"Vue.js",value:le}]}]).catch(e=>(console.error(e),1));"number"!=typeof e?(ae(this,te,e.preprocessor),ae(this,se,e.framework)):this.fail()}taskLibrary(){if(ie(this,se)===le)switch(ie(this,te)){case oe:return"@io-arc/task-webpack-vue-typescript";case ce:return"@io-arc/task-webpack-vue";default:return null}else switch(ie(this,te)){case oe:return"@io-arc/task-webpack-typescript";case ce:return"@io-arc/task-webpack-babel";default:return null}}dependencies(){let e={};if(ie(this,se)===le)switch(ie(this,te)){case oe:e={...e,...U};break;case ce:e={...e,...J}}switch(ie(this,te)){case oe:e={...e,...X,typescript:ee,"ts-node":Z};break;case ce:e={...e,...Q}}return e}template(e){switch(ie(this,te)){case oe:return ie(this,re).call(this,e);case ce:return ie(this,ne).call(this,e);default:return[]}}}te=new WeakMap,se=new WeakMap,ne=new WeakMap,re=new WeakMap;var he,de=function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},me=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class we extends b{constructor(e){super(),he.set(this,void 0),de(this,he,{outputDir:"dist",wsDir:{static:"static",html:"html",css:"css",js:"js",img:"img",yaml2json:"yaml2json"},deployDir:e,options:{js:{splitFilename:"asset",eslint:".eslintrc.yml"},fileLoader:{html:{use:!0,hash:!0,target:[{tag:"img",attribute:"src",type:"src"},{tag:"img",attribute:"srcset",type:"srcset"},{tag:"img",attribute:"data-src",type:"src"},{tag:"img",attribute:"data-srcset",type:"srcset"},{tag:"source",attribute:"src",type:"src"}]},css:{use:!0,hash:!0},js:{use:!0,hash:!0}}}})}workingDirectories(){const e=[];return Object.keys(me(this,he).wsDir).forEach(t=>{e.push(me(this,he).wsDir[t])}),e}pugToPHP(e,t){e===A&&(me(this,he).options.pug={php:t===H})}tsconfig(e){e===oe&&(me(this,he).options.js.tsconfig="tsconfig.json")}jsFramework(e){e!==le||(me(this,he).options.fileLoader.vue={use:!0,loader:{video:["src","poster"],source:"src",img:"src"}})}wsHTML(){return me(this,he).wsDir.html}wsJS(){return me(this,he).wsDir.js}async create(){await super.create("local",me(this,he)),await super.create("local-development",{options:{html:{minify:!1},css:{minify:!1},js:{minify:!1,sourceMap:!0},json:{minify:!1}}}),await super.create("local-production",{options:{html:{minify:!0},css:{minify:!0},js:{minify:!0,sourceMap:!1},json:{minify:!0}}})}template(){return[{source:`${W}/img/README.md`,output:`src/${me(this,he).wsDir.img}`}]}}he=new WeakMap;var ge,fe=function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},ye=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class ve{constructor(){ge.set(this,void 0),fe(this,ge,"declare module '*.yml' {\n  const value: any\n  export default value\n}\n\ndeclare module '*.png'\ndeclare module '*.jpg'\ndeclare module '*.jpeg'\ndeclare module '*.gif'\ndeclare module '*.svg'\ndeclare module '*.webp'\n\n/* webpack define */\ndeclare const IS_PRODUCTION: boolean\ndeclare const SITE_TITLE: string\ndeclare const SITE_URL: string\ndeclare const SITE_AUTHOR: string\ndeclare const SITE_ROOT: string")}addVue(){fe(this,ge,ye(this,ge)+"\n\n/* Vue.js */\ndeclare module '*.vue' {\n  import Vue from 'vue'\n  export default Vue\n}")}async create(){await r("types");const e="types/custom.d.ts";fe(this,ge,ye(this,ge)+"\n");try{n.writeFileSync(e,ye(this,ge)),y(e)}catch(t){f(e,t)}}}ge=new WeakMap;var be,ke,je=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},Ee=function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s};const Me="npm",De="yarn";class Te extends L{constructor(){super(...arguments),be.set(this,!0),ke.set(this,Me)}isInstall(){return je(this,be)}async questions(){this.startLog("Package Install");const e=await o.prompt({type:"confirm",name:"install",message:"Library install?",default:!0}).catch(e=>(console.error(e),{install:!1}));Ee(this,be,e.install)}async packageManager(){const e=await o.prompt({type:"list",name:"manager",message:"Package manager",choices:[{name:"npm",value:Me},{name:"yarn",value:De}]}).catch(e=>(console.error(e),{manager:Me}));Ee(this,ke,e.manager)}start(e){console.log(s.bold().blue("Install start..."));const t=c.spawn(je(this,ke),["install"],{cwd:i.resolve(),stdio:"inherit"});console.log(""),t.on("close",t=>{0===t?e&&e():console.error("Install error X(")})}}be=new WeakMap,ke=new WeakMap;var Se,$e,We,xe=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class Le{constructor(e,t,s,n){Se.set(this,{name:"",version:"",description:"",main:"",author:"",license:"ISC",engines:Y,scripts:{},devDependencies:{},dependencies:{}}),$e.set(this,e=>{const t={};return Object.keys(e).sort().forEach(s=>{t[s]=e[s]}),t}),We.set(this,()=>{const e=["vue"],t=Object.keys(xe(this,Se).devDependencies),s={};for(const n of t)e.includes(n)&&(s[n]=xe(this,Se).devDependencies[n],delete xe(this,Se).devDependencies[n]);this.addDependenciesObject(s)}),xe(this,Se).name=e,xe(this,Se).version=t,xe(this,Se).description=s,xe(this,Se).author=n,xe(this,Se).devDependencies={"@io-arc/task-browser-sync":"^0.1.1","@io-arc/task-clean":"^0.1.1","@io-arc/task-copy":"^0.1.1","@io-arc/task-manifest":"^0.1.1","@io-arc/task-service-worker":"^0.1.1","@io-arc/task-yaml2json":"^0.1.1","cross-env":p,"npm-run-all":l,eslint:G,"eslint-config-prettier":z,prettier:K,webpack:u,"webpack-cli":h},xe(this,Se).scripts={start:"cross-env NODE_ENV=development MODE_ENV=watch npm-run-all -p b:*",build:"cross-env NODE_ENV=development MODE_ENV=once npm-run-all -s clean b:* service-worker",release:"cross-env NODE_ENV=production MODE_ENV=once npm-run-all -s clean b:* service-worker",clean:"ia-clean",server:"ia-browser-sync","service-worker":"ia-sw","b:copy":"ia-copy","b:yaml2json":"ia-yaml2json","b:manifest":"ia-manifest","b:webpack":"webpack"}}addDevDependencies(e){null!=e&&(xe(this,Se).devDependencies[e]="^0.1.1")}addDevDependenciesObject(e){null!=e&&(xe(this,Se).devDependencies={...xe(this,Se).devDependencies,...e})}addDependenciesObject(e){null!=e&&(xe(this,Se).dependencies={...xe(this,Se).dependencies,...e})}create(){xe(this,We).call(this),xe(this,Se).devDependencies=xe(this,$e).call(this,xe(this,Se).devDependencies),xe(this,Se).dependencies=xe(this,$e).call(this,xe(this,Se).dependencies);try{n.writeFileSync("package.json",JSON.stringify(xe(this,Se),null,2)),y("package.json")}catch(e){f("package.json",e),process.exit(1)}}}Se=new WeakMap,$e=new WeakMap,We=new WeakMap;const qe={"node-sass":"^4.14.0",webpack:"^4.42.1","webpack-cli":"^3.3.11"},Oe={stylus:"^0.54.7",webpack:"^4.42.1","webpack-cli":"^3.3.11"};var Ne,Re=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},Ve=function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s};const Ie="css",Pe="sass",_e="stylus";class Fe extends L{constructor(){super(...arguments),Ne.set(this,Ie)}lang(){return Re(this,Ne)}async questions(){this.startLog("Select CSS Language");const e=await o.prompt([{type:"list",name:"lang",message:"CSS language",choices:[{name:"CSS (Vanilla)",value:Ie},{name:"Sass (SASS/SCSS)",value:Pe},{name:"Stylus",value:_e}]}]).catch(e=>(console.error(e),1));"number"!=typeof e?Ve(this,Ne,e.lang):this.fail()}taskLibrary(){switch(Re(this,Ne)){case Ie:return"@io-arc/task-webpack-css";case Pe:return"@io-arc/task-webpack-sass";case _e:return"@io-arc/task-webpack-stylus";default:return null}}dependencies(){switch(Re(this,Ne)){case Pe:return qe;case _e:return Oe;default:return null}}}Ne=new WeakMap;var Ae,Be,He,Ce,Je=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},Ue=function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s};class Xe extends L{constructor(){super(...arguments),Ae.set(this,["common","css"]),Be.set(this,["common","js"]),He.set(this,["common","img"]),Ce.set(this,["common","json"])}async questions(){this.startLog("Deploy settings");const e=await o.prompt([{type:"input",name:"css",message:"CSS files output directory",default:Je(this,Ae).join("/")},{type:"input",name:"js",message:"JavaScript files output directory",default:Je(this,Be).join("/")},{type:"input",name:"img",message:"Image files output directory",default:Je(this,He).join("/")},{type:"input",name:"json",message:"YAML to JSON convert files output directory",suffix:`\n ${s.grey("* use @io-arc/task-yaml2json")}`,default:Je(this,Ce).join("/")}]).catch(e=>(console.error(e),1));"number"!=typeof e?(Ue(this,Ae,e.css.split("/").filter(Boolean)),Ue(this,Be,e.js.split("/").filter(Boolean)),Ue(this,He,e.img.split("/").filter(Boolean)),Ue(this,Ce,e.json.split("/").filter(Boolean))):this.fail()}dir(){return{css:Je(this,Ae),js:Je(this,Be),img:Je(this,He),json:Je(this,Ce)}}}Ae=new WeakMap,Be=new WeakMap,He=new WeakMap,Ce=new WeakMap;var Qe,Ye,Ge,ze,Ke=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},Ze=function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s};class et extends L{constructor(){super(...arguments),Qe.set(this,i.basename(process.cwd())),Ye.set(this,"1.0.0"),Ge.set(this,""),ze.set(this,"")}name(){return Ke(this,Qe)}version(){return Ke(this,Ye)}description(){return Ke(this,Ge)}author(){return Ke(this,ze)}async questions(){this.startLog("Project settings");const e=await o.prompt([{type:"input",name:"name",message:"Project Name",default:Ke(this,Qe)},{type:"input",name:"version",message:"Project Version",default:Ke(this,Ye)},{type:"input",name:"description",message:"Project Description"},{type:"input",name:"author",message:"Project Author"}]).catch(e=>(console.error(e),1));"number"!=typeof e?(Ze(this,Qe,e.name),Ze(this,Ye,e.version),Ze(this,Ge,e.description),Ze(this,ze,e.author)):this.fail()}}Qe=new WeakMap,Ye=new WeakMap,Ge=new WeakMap,ze=new WeakMap;var tt,st,nt,rt,it,at=function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},ot=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class ct extends L{constructor(e){super(),tt.set(this,""),st.set(this,""),nt.set(this,""),rt.set(this,""),it.set(this,"/"),at(this,nt,e)}title(){return ot(this,tt)}url(){return ot(this,st)}siteRoot(){return ot(this,it)}author(){return ot(this,nt)}description(){return ot(this,rt)}async questions(){this.startLog("Site settings");const e=await o.prompt([{type:"input",name:"title",message:"Site title"},{type:"input",name:"url",message:"Release Site URL",suffix:`\n${s.grey("No final slash required\ne.g. https://foo.com")}`,validate:e=>!/\/$/.test(e)},{type:"input",name:"author",message:"Site author",default:ot(this,nt)},{type:"input",name:"description",message:"Site description"},{type:"input",name:"siteRoot",message:"Site root directory",suffix:`\n${s.grey("Always add a slash at the end")}`,default:ot(this,it)}]).catch(e=>(console.error(e),1));"number"!=typeof e?(at(this,tt,e.title),at(this,st,e.url),at(this,it,e.siteRoot),at(this,nt,e.author),at(this,rt,e.description)):this.fail()}}tt=new WeakMap,st=new WeakMap,nt=new WeakMap,rt=new WeakMap,it=new WeakMap;var pt,lt=function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},ut=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class ht{constructor(e,t,s){pt.set(this,void 0);const n=[];null!==e&&n.push(`const { html } = require('${e}')`),null!==t&&n.push(`const { css } = require('${t}')`),null!==s&&n.push(`const { js } = require('${s}')`),lt(this,pt,`${n.join("\n")}\n\nmodule.exports = [html, css, js]\n`)}create(){try{n.writeFileSync("webpack.config.js",ut(this,pt)),y("webpack.config.js")}catch(e){f("webpack.config.js",e)}}}pt=new WeakMap,process.stdin.resume(),process.on("SIGINT",()=>{console.log(s.green("Bye !")),process.exit(0)}),(async()=>{t.program.version("0.1.1").parse(process.argv);const e=new g;if(!e.check())return void e.fail();const n=new x,r=new et;await r.questions();const i=new Le(r.name(),r.version(),r.description(),r.author());console.log("");const a=new ct(r.author());await a.questions(),console.log("");const o=new C;await o.questions(),i.addDevDependencies(o.taskLibrary()),console.log("");const c=new Fe;await c.questions(),i.addDevDependencies(c.taskLibrary()),i.addDevDependenciesObject(c.dependencies()),console.log("");const p=new ue;await p.questions(),i.addDevDependencies(p.taskLibrary()),i.addDevDependenciesObject(p.dependencies()),console.log("");const l=new Xe;await l.questions();const u=new we(l.dir());u.pugToPHP(o.engine(),o.ext()),u.jsFramework(p.framework()),u.tsconfig(p.preprocessor());const h=new M(a.title(),a.url(),a.author(),a.description(),a.siteRoot());if(console.log(""),await o.createTemplateQuestion(),n.add(o.template(u.wsHTML())),n.add(u.template()),n.add(p.template(u.wsJS())),await n.create(u.workingDirectories()),await u.create(),await h.create(),i.create(),p.preprocessor()===oe){const e=new ve;p.framework()===le&&e.addVue(),await e.create()}new ht(o.taskLibrary(),c.taskLibrary(),p.taskLibrary()).create(),console.log("");const d=s.bold().blue("Done!\nEnjoy create!!"),m=new Te;await m.questions(),m.isInstall()?(await m.packageManager(),m.start(()=>console.log(d))):console.log(d)})();
